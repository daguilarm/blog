<!DOCTYPE html>
<html lang="es">
    <head>
        <meta charset="UTF-8">
        <title>Cargar componentes de forma dinámica y condicional con Laravel Livewire y AlpineJS - Fracasos y éxitos</title>
        <meta http-equiv="X-UA-Compatible" content="IE=edge,chrome=1" />
        <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">
        <meta name="description" content="Código para cargar componentes de Laravel Livewire de forma dinámica mediante AlpineJS, y todo ello, de forma condicional con window.Livewire.rescan()">
        <meta name="msvalidate.01" content="7EBAF0830896AD1D4A27E93C37552EDA" />
        <meta http-equiv="expires" content="86400"/>
        
        <meta property="og:title" content="Cargar componentes de forma dinámica y condicional con Laravel Livewire y AlpineJS - Fracasos y éxitos" />
        <meta property="og:type" content="article" />
        <meta property="og:url" content="https://daguilar.dev/blog/livewire_cargar-componentes-de-forma-condicional-con-livewire-y-alpinejs"/>
        <meta property="og:description" content="Código para cargar componentes de Laravel Livewire de forma dinámica mediante AlpineJS, y todo ello, de forma condicional con window.Livewire.rescan()" />
        <meta property="og:locale" content="es_ES">
        <meta property="og:site_name" content="Blog de Damián Aguilar">
        <meta property="og:image:width" content="1200" />
        <meta property="og:image:height" content="630" />
        <meta property="og:image" content="https://daguilar.dev/assets/img/og-image.jpg" />
        <meta property="og:image:alt" content="Cargar componentes de forma dinámica y condicional con Laravel Livewire y AlpineJS - Fracasos y éxitos" />
        
        <meta name="twitter:card" content="summary_large_image">
        <meta name="twitter:site" content="@daguilarm">
        <meta name="twitter:creator" content="@daguilarm">
        <meta name="twitter:title" content="Cargar componentes de forma dinámica y condicional con Laravel Livewire y AlpineJS - Fracasos y éxitos">
        <meta name="twitter:description" content="Código para cargar componentes de Laravel Livewire de forma dinámica mediante AlpineJS, y todo ello, de forma condicional con window.Livewire.rescan()">
        <meta name="twitter:creator" content="@daguilarm">
        <meta name="twitter:domain" content="https://daguilar.dev">
        <meta name="twitter:image" content="https://daguilar.dev/assets/img/twitter.jpg?refresh=893096093">
        <meta name="twitter:image:alt" content="Cargar componentes de forma dinámica y condicional con Laravel Livewire y AlpineJS - Fracasos y éxitos">
        
        <meta name="msapplication-TileColor" content="#ffffff">
        <meta name="msapplication-TileImage" content="/ms-icon-144x144.png">
        <meta name="theme-color" content="#ffffff">
        <meta name="robots" content="index, follow, max-image-preview:large, max-snippet:-1, max-video-preview:-1">
        
                                <meta property="article:tag" content="laravel">
                    <meta property="article:tag" content="livewire">
                    <meta property="article:tag" content="alpinejs">
                <meta property="article:published_time" content="2020-10-18T00:00:00+00:00">
    <meta property="article:updated_time" content="2020-10-18T00:00:00+00:00">
    <link rel="canonical" href="https://daguilar.dev/blog/livewire_cargar-componentes-de-forma-condicional-con-livewire-y-alpinejs/">
        
        <link rel="home" href="https://daguilar.dev">
        <link rel="alternate" type="application/rss+xml" title="Blog de Damián Aguilar" href="https://daguilar.dev/rss.xml" />
        <link rel="apple-touch-icon" sizes="57x57" href="https://daguilar.dev/assets/img/favicon/apple-icon-57x57.png">
        <link rel="apple-touch-icon" sizes="60x60" href="https://daguilar.dev/assets/img/favicon/apple-icon-60x60.png">
        <link rel="apple-touch-icon" sizes="72x72" href="https://daguilar.dev/assets/img/favicon/apple-icon-72x72.png">
        <link rel="apple-touch-icon" sizes="76x76" href="https://daguilar.dev/assets/img/favicon/apple-icon-76x76.png">
        <link rel="apple-touch-icon" sizes="114x114" href="https://daguilar.dev/assets/img/favicon/apple-icon-114x114.png">
        <link rel="apple-touch-icon" sizes="120x120" href="https://daguilar.dev/assets/img/favicon/apple-icon-120x120.png">
        <link rel="apple-touch-icon" sizes="144x144" href="https://daguilar.dev/assets/img/favicon/apple-icon-144x144.png">
        <link rel="apple-touch-icon" sizes="152x152" href="https://daguilar.dev/assets/img/favicon/apple-icon-152x152.png">
        <link rel="apple-touch-icon" sizes="180x180" href="https://daguilar.dev/assets/img/favicon/apple-icon-180x180.png">
        <link rel="icon" type="image/png" sizes="192x192"  href="https://daguilar.dev/assets/img/favicon/android-icon-192x192.png">
        <link rel="icon" type="image/png" sizes="32x32" href="https://daguilar.dev/assets/img/favicon/favicon-32x32.png">
        <link rel="icon" type="image/png" sizes="96x96" href="https://daguilar.dev/assets/img/favicon/favicon-96x96.png">
        <link rel="icon" type="image/png" sizes="16x16" href="https://daguilar.dev/assets/img/favicon/favicon-16x16.png">
        <link rel="manifest" href="https://daguilar.dev/assets/img/favicon/manifest.json">
        <link rel="stylesheet" href="/assets/build/css/main.css?id=49f38d9b95e09570684615779a795c68">
        
        
        
        
        <script type="text/javascript" src="../../assets/gdpr/gdpr.js"></script>
        <script type="text/javascript" src="../../assets/gdpr/es.js"></script>
        <script>
            document.addEventListener('gdprCookiesEnabled', function (e) {
                if(e.detail.marketing) { //checks if marketing cookies are enabled
                    var divForBanner = document.getElementsByClassName('marketing-banner');
                    var bannerHtml = '<iframe src="https://rcm-eu.amazon-adsystem.com/e/cm?o=30&p=48&l=ur1&category=primeday&banner=0CJQFH890BEJ2EREPQR2&f=ifr&linkID=0dee11051e921f2ae16f919c6515de3b&t=ofertiacom-21&tracking_id=ofertiacom-21" width="728" height="90" scrolling="no" border="0" marginwidth="0" style="border:none;" frameborder="0" sandbox="allow-scripts allow-same-origin allow-popups allow-top-navigation-by-user-activation"></iframe>';
                    
                    for (var i = 0; i < divForBanner.length; i++) {
                        divForBanner[i].innerHTML = bannerHtml;
                    }
                }
            });
        </script>
    </head>

    <body class="flex flex-col justify-between min-h-screen bg-gray-100 text-gray-800 leading-normal">
        <div aria-label="categories" class="hidden lg:flex text-md px-4 py-2 h-11 w-full z-10 bg-blue-800 border-b-2 border-blue-800">
    <ul class="flex items-start m-0">
        <li class="mx-2">
            <a title="Artículos PHP" href="https://daguilar.dev/blog/categories/php/" class="bg-blue-900 hover:bg-white text-blue-100 hover:text-blue-700 rounded text-xs py-1 px-3">
                PHP
            </a>
        </li>
        <li class="mx-2">
            <a title="Artículos Laravel" href="https://daguilar.dev/blog/categories/laravel/" class="bg-blue-900 hover:bg-white text-blue-100 hover:text-blue-700 rounded text-xs py-1 px-3">
                Laravel
            </a>
        </li>
        <li class="mx-2">
            <a title="Artículos Javascript" href="https://daguilar.dev/blog/categories/javascript/" class="bg-blue-900 hover:bg-white text-blue-100 hover:text-blue-700 rounded text-xs py-1 px-3">
                Javascript
            </a>
        </li>
        <li class="mx-2">
            <a title="Artículos SEO" href="https://daguilar.dev/blog/categories/seo/" class="bg-blue-900 hover:bg-white text-blue-100 hover:text-blue-700 rounded text-xs py-1 px-3">
                SEO
            </a>
        </li>
        <li class="mx-2">
            <a title="Artículos AlpineJS" href="https://daguilar.dev/blog/categories/alpinejs/" class="bg-blue-900 hover:bg-white text-blue-100 hover:text-blue-700 rounded text-xs py-1 px-3">
                AlpineJS
            </a>
        </li>
        <li class="mx-2">
            <a title="Artículos Laravel Livewire" href="https://daguilar.dev/blog/categories/livewire/" class="bg-blue-900 hover:bg-white text-blue-100 hover:text-blue-700 rounded text-xs py-1 px-3">
                Laravel Livewire
            </a>
        </li>
        <li class="mx-2">
            <a title="Artículos Bases de datos" href="https://daguilar.dev/blog/categories/database/" class="bg-blue-900 hover:bg-white text-blue-100 hover:text-blue-700 rounded text-xs py-1 px-3">
                Bases de Datos
            </a>
        </li>
        <li class="mx-2">
            <a title="Artículos HTML y HTML5" href="https://daguilar.dev/blog/categories/html/" class="bg-blue-900 hover:bg-white text-blue-100 hover:text-blue-700 rounded text-xs py-1 px-3">
                HTML
            </a>
        </li>
        <li class="mx-2">
            <a title="Artículos Composer" href="https://daguilar.dev/blog/categories/composer/" class="bg-blue-900 hover:bg-white text-blue-100 hover:text-blue-700 rounded text-xs py-1 px-3">
                Composer
            </a>
        </li>
    </ul>
</div>        <a href="https://github.com/daguilarm" rel="noopener noreferrer" target="_blank" class="hidden lg:block float-right z-50" aria-label="Mis proyectos en GitHub"><svg width="80" height="80" viewBox="0 0 250 250" style="fill:#fff; color:#2c5282; position: absolute; top: 0; border: 0; right: 0;" aria-hidden="true"><path d="M0,0 L115,115 L130,115 L142,142 L250,250 L250,0 Z"></path><path d="M128.3,109.0 C113.8,99.7 119.0,89.6 119.0,89.6 C122.0,82.7 120.5,78.6 120.5,78.6 C119.2,72.0 123.4,76.3 123.4,76.3 C127.3,80.9 125.5,87.3 125.5,87.3 C122.9,97.6 130.6,101.9 134.4,103.2" fill="currentColor" style="transform-origin: 130px 106px;" class="octo-arm"></path><path d="M115.0,115.0 C114.9,115.1 118.7,116.5 119.8,115.4 L133.7,101.6 C136.9,99.2 139.9,98.4 142.2,98.6 C133.8,88.0 127.5,74.4 143.8,58.0 C148.5,53.4 154.0,51.2 159.7,51.0 C160.3,49.4 163.2,43.6 171.4,40.1 C171.4,40.1 176.1,42.5 178.8,56.2 C183.1,58.6 187.2,61.8 190.9,65.4 C194.5,69.0 197.7,73.2 200.1,77.6 C213.8,80.2 216.3,84.9 216.3,84.9 C212.7,93.1 206.9,96.0 205.4,96.6 C205.1,102.4 203.0,107.8 198.3,112.5 C181.9,128.9 168.3,122.5 157.7,114.1 C157.9,116.9 156.7,120.9 152.7,124.9 L141.0,136.5 C139.8,137.7 141.6,141.9 141.8,141.8 Z" fill="currentColor" class="octo-body"></path></svg></a><style>.github-corner:hover .octo-arm{animation:octocat-wave 560ms ease-in-out}@keyframes  octocat-wave{0%,100%{transform:rotate(0)}20%,60%{transform:rotate(-25deg)}40%,80%{transform:rotate(10deg)}}@media (max-width:500px){.github-corner:hover .octo-arm{animation:none}.github-corner .octo-arm{animation:octocat-wave 560ms ease-in-out}}</style>
        <header class="flex items-center h-32 shadow-xl bg-blue-600" role="banner">
            
            
            
            <div class="container flex items-center max-w-8xl mx-auto px-4 lg:px-8">
                
                <div class="z-20 -mt-20 sm:mt-0">
                    <a href="/" title="Blog de Damián Aguilar" class="block sm:hidden absolute top-0 mt-3 text-yellow-400">El blog de Damián Aguilar</a>
                    <a href="/" title="Blog de Damián Aguilar" class="hidden sm:block">
                        <div class="text-lg text-yellow-400 p-2">El blog de</div>
                        <div class="text-2xl font-bold text-white p-2 -mt-4">Damián Aguilar</div>
                    </a>
                </div>
                
                <div class="hidden lg:flex">
    <div class="sun">
        <div class="ray_box">
            <div class="ray ray1"></div>
            <div class="ray ray2"></div>
            <div class="ray ray3"></div>
            <div class="ray ray4"></div>
            <div class="ray ray5"></div>
            <div class="ray ray6"></div>
            <div class="ray ray7"></div>
            <div class="ray ray8"></div>
            <div class="ray ray9"></div>
            <div class="ray ray10"></div>
        </div>
    </div>

</div>
                
                <div id="vue-search" class="flex flex-1 justify-end items-center relative">
                    <search class="z-50"></search>
                    <nav aria-label="navigation" class="hidden lg:flex items-center justify-end text-lg z-20">
    <a title="Blog de Damián Aguilar" href="/blog/"
        class="ml-6 text-white hover:text-blue-700 hover:bg-blue-100 hover:shadow rounded py-1 px-3 ">
        Artículos
    </a>

    <a title="Sobre mi: Blog de Damián Aguilar" href="/about/"
        class="ml-6 text-white hover:text-blue-700 hover:bg-blue-100 hover:shadow rounded py-1 px-3 ">
        Sobre mi
    </a>

    <a title="Proyectos: Blog de Damián Aguilar" href="/projects/"
        class="ml-6 text-white hover:text-blue-700 hover:bg-blue-100 hover:shadow rounded py-1 px-3 ">
        Proyectos
    </a>

    <a title="Contacto: Blog de Damián Aguilar" href="/contact/"
        class="ml-6 text-white hover:text-blue-700 hover:bg-blue-100 hover:shadow rounded py-1 px-3 ">
        Contacto
    </a>
</nav>
                    <button onclick="navMenu.toggle()" class="flex justify-center items-center bg-blue-500 border border-blue-500 h-10 px-5 rounded-full lg:hidden focus:outline-none z-60">
    <svg id="js-nav-menu-show" xmlns="http://www.w3.org/2000/svg"
        class="fill-current text-white h-9 w-4" viewBox="0 0 32 32"
    >
        <path d="M4,10h24c1.104,0,2-0.896,2-2s-0.896-2-2-2H4C2.896,6,2,6.896,2,8S2.896,10,4,10z M28,14H4c-1.104,0-2,0.896-2,2  s0.896,2,2,2h24c1.104,0,2-0.896,2-2S29.104,14,28,14z M28,22H4c-1.104,0-2,0.896-2,2s0.896,2,2,2h24c1.104,0,2-0.896,2-2  S29.104,22,28,22z"/>
    </svg>

    <svg id="js-nav-menu-hide" xmlns="http://www.w3.org/2000/svg"
        class="hidden fill-current text-white h-9 w-4" viewBox="0 0 36 30"
    >
        <polygon points="32.8,4.4 28.6,0.2 18,10.8 7.4,0.2 3.2,4.4 13.8,15 3.2,25.6 7.4,29.8 18,19.2 28.6,29.8 32.8,25.6 22.2,15 "/>
    </svg>
</button>

                </div>
            </div>
        </header>

        <nav id="js-nav-menu" class="nav-menu hidden lg:hidden">
    <ul class="my-0">
        <li class="pl-4">
            <a
                title="Blog de Damián Aguilar"
                href="/blog/"
                class="nav-menu__item hover:text-blue-600 "
            >Artículos</a>
        </li>
        <li class="pl-4">
            <a
                title="Sobre mi: Blog de Damián Aguilar"
                href="/about/"
                class="nav-menu__item hover:text-blue-600 "
            >Sobre mi</a>
        </li>
        <li class="pl-4">
            <a
                title="Contacto: Blog de Damián Aguilar"
                href="/contact/"
                class="nav-menu__item hover:text-blue-600 "
            >Contacto</a>
        </li>
    </ul>
</nav>

        <main role="main" class="flex-auto w-full container mx-auto py-16 px-6 z-20">

            <div class="marketing-banner flex justify-center w-full"></div>
            
    <article class=" bg-white rounded-xl shadow-xl p-9 my-10 border border-gray-300">
        <h1 class="leading-none mb-6 text-blue-800 text-3xl md:text-4xl lg:text-5xl">Cargar componentes de forma dinámica y condicional con Laravel Livewire y AlpineJS - Fracasos y éxitos</h1>

        <p class="flex justify-start text-gray-600 text-xl md:mt-0">
            <span>Damián Aguilar</span>
            <a href="https://twitter.com/daguilarm" target="_black" class="mx-2"><img src="/assets/img/twitter.png" alt="twitter" class="opacity-75 hover:opacity-100 h-8 w-8 bg-white rounded-full"></a>
            <span> - 18/10/2020</span>
        </p>

                                    <a
                    href="/blog/categories/laravel/"
                    title="View posts in laravel"
                    class="inline-block bg-blue-200 hover:bg-blue-400 leading-loose tracking-wide text-blue-600 hover:text-white uppercase text-xs font-semibold rounded mr-4 px-3 pt-px"
                >laravel</a>
                            <a
                    href="/blog/categories/livewire/"
                    title="View posts in livewire"
                    class="inline-block bg-blue-200 hover:bg-blue-400 leading-loose tracking-wide text-blue-600 hover:text-white uppercase text-xs font-semibold rounded mr-4 px-3 pt-px"
                >livewire</a>
                            <a
                    href="/blog/categories/alpinejs/"
                    title="View posts in alpinejs"
                    class="inline-block bg-blue-200 hover:bg-blue-400 leading-loose tracking-wide text-blue-600 hover:text-white uppercase text-xs font-semibold rounded mr-4 px-3 pt-px"
                >alpinejs</a>
                    
        <div v-pre>
            <p>Me he encontrado en la situación de querer cargar componentes de <strong>Laravel Livewire</strong> de forma condicional, y todo ello, en función de un campo <code>select</code> o de un simple <em>click</em> en un enlace (en mi caso se trataba de un sistema de pestañas y contenedores).</p>

<p>La idea era no cargar nada de inicio y en función de la selección, ir cargando de forma dinámica un componente determinado tal y como se hubiera hecho con <code>Jquery</code>. Terminando con la carga del resultado de la consulta <code>AJAX</code> en un contenedor <code>div</code>:</p>

<pre><code class="language-javascript">$("button").on('click', function(){
    $("#div").load("ajaxResponse.php");
});
</code></pre>

<p>El sistema que planteo tiene un reto más, y es el de reutilizar componentes <code>Livewire</code> que ya he utilizado en otra parte del proyecto, y por tanto, no tener que repetir código. Esto tiene un problema (realmente tiene varios), y es que no puedo modificar (ni adaptar) el componente original que voy a cargar en el contenedor, ya que al hacerlo, podría dejar de funcionar en su ubicación original, y al final la solución se convierte en problema.</p>

<p>El planteamiento era más o menos así:</p>

<pre><code class="language-html">&lt;span x-data="{load: 0}"
    &lt;div id="selectors"&gt;
        &lt;a href="#" x-click="load = 1"&gt;Cargar contenido 1&lt;/a&gt;
        &lt;a href="#" x-click="load = 2"&gt;Cargar contenido 2&lt;/a&gt;
        &lt;a href="#" x-click="load = 3"&gt;Cargar contenido 3&lt;/a&gt;
    &lt;/div&gt;
    &lt;div id="rootContainer"&gt;
        &lt;template x-if="load === 1"&gt;
            &lt;livewire:component1 /&gt;
        &lt;/template&gt;
        &lt;template x-if="load === 2"&gt;
            &lt;livewire:component2 /&gt;
        &lt;/template&gt;
        &lt;template x-if="load === 3"&gt;
            &lt;livewire:component3 /&gt;
        &lt;/template&gt;
    &lt;/div&gt;
&lt;/span&gt;
</code></pre>

<p>Y obviamente no funcionaba. Obtenía el siguiente mensaje de error:</p>

<p><code>Uncaught TypeError: Cannot read property '$wire' of undefined</code></p>

<p>Así que estaba empezando a pensar que tendría que hacer algo así:</p>

<pre><code class="language-html">&lt;span x-data="{load: 0}"
    &lt;div id="selectors"&gt;
        &lt;a href="#" x-click="load = 1"&gt;Cargar contenido 1&lt;/a&gt;
        &lt;a href="#" x-click="load = 2"&gt;Cargar contenido 2&lt;/a&gt;
        &lt;a href="#" x-click="load = 3"&gt;Cargar contenido 3&lt;/a&gt;
    &lt;/div&gt;
    &lt;div id="rootContainer"&gt;
        &lt;div x-show="load === 1"&gt;
            &lt;livewire:component1 /&gt;
        &lt;/div&gt;
        &lt;div x-show="load === 2"&gt;
            &lt;livewire:component2 /&gt;
        &lt;/div&gt;
        &lt;div x-show="load === 3"&gt;
            &lt;livewire:component3 /&gt;
        &lt;/div&gt;
    &lt;/div&gt;
&lt;/span&gt;
</code></pre>

<p>Lo cual está bien si vamos a trabajar con componentes simples. No era el caso  y encima son muchos componentes (doce en total). Donde te puedes encontrar perfectamente con 87 llamadas a la base de datos (en este caso particular)... una situación poco ideal.</p>

<p>El error de mi primera aproximación al problema, se debía a que cuando utilizas <code>x-if</code> tienes que utilizar la equiqueta <code>template</code>, o da error. Esta etiqueta, te obliga a tener un solo componente <code>root</code>, es decir, tienes que meter todo tu código en un contenedor <code>div</code> principal.</p>

<p>El ejemplo siguiente va a dar error, ya que no dispone de un contenedor principal:</p>

<pre><code class="language-html">//component1.blade.php

&lt;h1&gt;Title&lt;/h1&gt;
&lt;h4&gt;Lorem, ipsum dolor sit amet consectetur adipisicing elit. Impedit sapiente pariatur error illo. Veniam, sunt reprehenderit libero rerum nobis doloribus ex error alias laudantium ipsum sit, eius mollitia necessitatibus vitae?&lt;/h4&gt;
</code></pre>

<p>Se debe cambiar por:</p>

<pre><code class="language-html">//component1.blade.php
&lt;div&gt;
    &lt;h1&gt;Title&lt;/h1&gt;
    &lt;h4&gt;Lorem, ipsum dolor sit amet consectetur adipisicing elit. Impedit sapiente pariatur error illo. Veniam, sunt reprehenderit libero rerum nobis doloribus ex error alias laudantium ipsum sit, eius mollitia necessitatibus vitae?&lt;/h4&gt;
&lt;/div&gt;
</code></pre>

<p>Después de revisar media internet en busca de soluciones, llegué a este comentario en <code>github</code> sobre un problema que parecía similar:</p>

<ul>
<li><a href="https://github.com/livewire/livewire/pull/1534" class="link-out">https://github.com/livewire/livewire/pull/1534</a></li>
</ul>

<p>Y proponía una solución parecida a esta:</p>

<pre><code class="language-html">&lt;span x-data="{load: 0}"
    &lt;div id="selectors"&gt;
        &lt;a href="#" x-click="load = 1"&gt;Cargar contenido 1&lt;/a&gt;
        &lt;a href="#" x-click="load = 2"&gt;Cargar contenido 2&lt;/a&gt;
        &lt;a href="#" x-click="load = 3"&gt;Cargar contenido 3&lt;/a&gt;
    &lt;/div&gt;
    &lt;div id="rootContainer"&gt;
        &lt;template x-if="load === 1"&gt;
            &lt;div x-data="{}" x-init="window.Livewire.rescan($el)"&gt;
                &lt;livewire:component1 /&gt;
            &lt;/div&gt;
        &lt;/template&gt;
        &lt;template x-if="load === 2"&gt;
            &lt;div x-data="{}" x-init="window.Livewire.rescan($el)"&gt;
                &lt;livewire:component2 /&gt;
            &lt;/div&gt;
        &lt;/template&gt;
        &lt;template x-if="load === 3"&gt;
            &lt;div x-data="{}" x-init="window.Livewire.rescan($el)"&gt;
                &lt;livewire:component3 /&gt;
            &lt;/div&gt;
        &lt;/template&gt;
    &lt;/div&gt;
&lt;/span&gt;
</code></pre>

<p>Esta técnica, lo que hace es reiniciar cada elemento <code>Livewire</code>, y al hacer esto, los elementos se van visualizando conforme hacemos <em>click</em> en cada enlace, realmente es lo que estaba buscando.</p>

<p>En este punto, me puse a revisar el código <code>HTML</code> y efectivamente, todo el código se había eliminado del <code>DOM</code>... el problema lo encontré al revisar las consultas a la base de datos: seguían siendo 87.</p>

<p>Es decir, por un lado eliminaba el <code>HTML</code> del <code>DOM</code> hasta el momento en que se hace la llamada a través del <code>click</code> en el enlace, pero por otro lado, seguía realizando las consultas a la base de datos.</p>

<p>Seguía teniendo prácticamente el mismo problema que al principio, aunque con un código <code>HTML</code> más ligero...</p>

<p>Mi siguiente planteamiento fue el de crear un componente <code>Livewire</code>, de modo que cada vez que se hiciera <code>click</code> en un enlace, se enviara una variable con el componente a cargar mediante <code>Livewire</code>:</p>

<pre><code class="language-html">&lt;a wire:click="setContainer('1')"&gt;Container 1&lt;/a&gt;
</code></pre>

<p>Y dentro del nuevo componente <code>Livewire</code>:</p>

<pre><code class="language-html">&lt;span x-data="{load: 0}"
    &lt;div id="selectors"&gt;
        &lt;a href="#" x-click="load = 1" wire:click="setContainer('1')"&gt;Cargar contenido 1&lt;/a&gt;
        &lt;a href="#" x-click="load = 2" wire:click="setContainer('2')"&gt;Cargar contenido 2&lt;/a&gt;
        &lt;a href="#" x-click="load = 3" wire:click="setContainer('3')"&gt;Cargar contenido 3&lt;/a&gt;
        ...
    &lt;/div&gt;
    &lt;div id="rootContainer"&gt;
        @if($container === 1)
            &lt;livewire:component1 /&gt;
        @endif
        @if($container === 2)
            &lt;livewire:component2 /&gt;
        @endif
        @if($container === 3)
            &lt;livewire:component3 /&gt;
        @endif
        ...
    &lt;/div&gt;
&lt;/span&gt;
</code></pre>

<p>Y el nuevo archivo <code>Livewire</code></p>

<pre><code class="language-php">&lt;?php

namespace App\Http\Livewire;

use Livewire\Component;

class Tabs extends Component
{
    public $container;

    public function setContainer($container)
    {
        $this-&gt;container = $container;
    }

    public function render()
    {
        return view('dashboard.sections.view', [
            'container' =&gt; $this-&gt;container,
        ]);
    }
}
</code></pre>

<p>Ahora solo queda cargar el componente con los enlaces y el contenedor:</p>

<pre><code class="language-html">    &lt;livewire:tabs container="0" :key="Str::random()" /&gt;
</code></pre>

<p>Y lo curioso es que funciona, pero da un error de JavaScript:</p>

<pre><code class="language-javascript">Uncaught (in promise) TypeError: Cannot read property 'fingerprint' of null
</code></pre>

<p>Por lo visto este error es debido a que hay un problema con las <code>keys</code> que genera <code>Livewire</code> y por algún motivo, no he sido capaz de ver donde se han generado claves repetidas...</p>

<ul>
<li><a href="https://github.com/livewire/livewire/issues/1686" class="link-out">https://github.com/livewire/livewire/issues/1686
</a></li>
</ul>

<h3>Actualización 19/10/2020</h3>

<p>Bien, he encontrado una solución pero que parece un parche... y tengo la sensación que es un <code>bug</code> en <code>alplineJS</code>. Consiste en reiniciarlizar <code>x-data</code> y recargar el componente <code>Livewire</code>.</p>

<pre><code class="language-html">&lt;span x-data="{load: 0, error: true}"
    &lt;div id="selectors"&gt;
        &lt;a href="#" x-click="load = 1" wire:click="setContainer('1')"&gt;Cargar contenido 1&lt;/a&gt;
        ...
    &lt;/div&gt;
    &lt;div id="rootContainer"&gt;
        &lt;div x-data="{}" x-init="window.Livewire.rescan($el)"&gt;
            @if($container === 1)
                &lt;livewire:component1 /&gt;
            @endif
        &lt;/div&gt;
        ...
    &lt;/div&gt;
&lt;/span&gt;
</code></pre>

<p>Aqui es donde viene lo raro, en el componente que se carga (según el ejemplo anterior <code>resources/views/livewire/component1</code>) también hay que volver a poner el código de reinicialización:</p>

<pre><code class="language-html">&lt;div x-data="{}" x-init="window.Livewire.rescan($el)"&gt;
    ...componente
&lt;/div&gt;
</code></pre>

<p>Sinceramente, estoy desconcertado... sigue dando error pero ahora funciona correctamente, y si nos olvidamos del mensaje en la consola de <code>JavaScript</code> es como si no pasara nada.</p>

<p>Seguiré investigando...</p>
        </div>

        
    </article>
    

            <div class="marketing-banner flex justify-center w-full"></div>        </main>

        <footer class="w-full flex items-center h-24 bg-white sm:bg-gray-600 sm:text-gray-100 text-center text-sm mt-12 py-4" role="contentinfo">
            <div class="flex-1">
                &copy; Damián Aguilar 2019-2022 -
                <a href="https://github.com/daguilarm" class="sm:text-gray-100 hover:text-gray-300">
                    Github
                </a> -
                <a href="https://daguilar.dev/blog/rss.xml" class="sm:text-gray-100 hover:text-gray-300">
                    RSS
                </a> -
                <a href="https://daguilar.dev/blog/legal/cookies/" class="sm:text-gray-100 hover:text-gray-300">
                    Política de cookies
                </a> -
                <a href="https://daguilar.dev/blog/legal/legal/" class="sm:text-gray-100 hover:text-gray-300">
                    Datos legales
                </a> -
                <a href="https://daguilar.dev/blog/legal/privacity/" class="sm:text-gray-100 hover:text-gray-300">
                    Aviso de privacidad
                </a>
            </div>
        </footer>

        <script src="/assets/build/js/main.js?id=db882802154f764159b559e4347422e8"></script>

        <script>
    const navMenu = {
        toggle() {
            const menu = document.getElementById('js-nav-menu');
            menu.classList.toggle('hidden');
            menu.classList.toggle('lg:block');
            document.getElementById('js-nav-menu-hide').classList.toggle('hidden');
            document.getElementById('js-nav-menu-show').classList.toggle('hidden');
        },
    }
</script>
        <script>

            gdprCookieNotice({
                    locale: 'es', // si lo cambias debes tener un archivo como el de arriba es.js
                    timeout: 1500, // tiempo de espera
                    expiration: 30, // días de duración de la cookie
                    domain: window.location.hostname, // dominio
                    implicit: false, // debe se false, porque de lo contrario no cumples
                    statement: '/legal/cookies', // url a la política de cookies / legal
                    analytics: [], // aquí el grupo analitica pero hay más en opciones
                    marketing: ['ad-privacy', 'ad-id']
            });

            document.addEventListener('DOMContentLoaded', function() {
                var linksTargetBlank = document.querySelectorAll('.link-out');
                for (var i = 0; i < linksTargetBlank.length; i++) {
                    linksTargetBlank[i].target = "_blank";
                    linksTargetBlank[i].rel = "noopener";
                }
            }, false);
        </script>
    </body>
</html>
